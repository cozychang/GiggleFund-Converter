<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GiggleFund Converter</title>
    
    <!-- ğŸŒŸ Favicon / Web App Icons -->
    <!-- é€šç”¨æµè§ˆå™¨å›¾æ ‡ -->
    <link rel="icon" type="image/png" sizes="32x32" href="favicon.png">
    <link rel="icon" type="image/png" sizes="96x96" href="favicon.png">

    <!-- é«˜åˆ†è¾¨ç‡ SVG å›¾æ ‡ï¼ˆç°ä»£æµè§ˆå™¨æ”¯æŒï¼‰ -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">

    <!-- å…¼å®¹æ—§ç‰ˆæµè§ˆå™¨çš„ .ico æ–‡ä»¶ -->
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">

    <!-- iPhone / iPad ä¸»å±å¹•å›¾æ ‡ -->
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">

    <!-- Web App Manifestï¼ˆAndroidã€PWA æ”¯æŒï¼‰ -->
    <link rel="manifest" href="site.webmanifest">

    <!-- å¯é€‰ä¸»é¢˜é¢œè‰²ï¼ˆåœ¨å®‰å“æµè§ˆå™¨é¡¶éƒ¨æ˜¾ç¤ºï¼‰ -->
    <meta name="theme-color" content="#FFD60A">

    <!-- å¯é€‰ï¼šä¸º Safari Pinned Tab æŒ‡å®šå›¾æ ‡é¢œè‰² -->
    <link rel="mask-icon" href="favicon.svg" color="#000000">

    <meta name="theme-color" content="#FFD60A">


    
    <!-- PWA Meta Tags -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="ä»·å€¼è§‚çº æ­£å™¨">
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XEZ049M5R2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-XEZ049M5R2');
    </script>
    
    <style>
        body {
            font-family: 'PingFang SC', 'Microsoft YaHei', 'Helvetica Neue', sans-serif;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #42bcf9d4 0%, #5c95e0 100%);
        }
        
        .container {
            padding: 50px 50px 30px 50px;
            text-align: center;
            transform: scale(1.3);
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .field {
            margin: 20px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        select {
            padding: 15px 45px 15px 20px;
            font-size: 16px;
            border: 2px solid #e1e8ff;
            border-radius: 12px;
            background: linear-gradient(145deg, #ffffff, #f0f4ff);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            cursor: pointer;
            min-width: 140px;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23667eea' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");
            background-size: 16px 16px;
            background-position: calc(100% - 15px) center;
            background-repeat: no-repeat;
        }
        
        select:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.15);
        }
        
        select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        select option {
            padding: 12px 20px;
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            font-size: 16px;
            border: none;
            margin: 2px 0;
        }
        
        select option:hover {
            background: linear-gradient(145deg, #667eea, #764ba2);
            color: white;
        }
        
        select option:checked {
            background: linear-gradient(145deg, #667eea, #764ba2);
            color: white;
            font-weight: 600;
        }
        
        select optgroup {
            font-weight: bold;
            font-size: 14px;
            color: #667eea;
            background: #f0f4ff;
            padding: 8px 12px;
            margin: 4px 0;
        }
        
        input {
            width: 220px;
            padding: 15px 20px;
            font-size: 16px;
            border: 2px solid #e1e8ff;
            border-radius: 12px;
            background: linear-gradient(145deg, #ffffff, #f9fbff);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            text-align: right;
            font-weight: 500;
        }
        
        input:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.15);
        }
        
        input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        input::placeholder {
            color: #a0a0a0;
            font-weight: normal;
        }
        
        h1 {
            font-size: 2.8em;
            margin-bottom: 35px;
            margin-top: -5px;
            background: linear-gradient(135deg, #000000);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 600;
            letter-spacing: -0.5px;
        }

        #langSelect {
            padding: 8px 14px;
            border: none;
            border-radius: 10px;
            background-color: #f7d947;
            color: #000;
            font-weight: 700;
            font-size: 15px;
            cursor: pointer;
            box-shadow: 0 3px 6px rgba(0,0,0,0.15);
            transition: all 0.25s ease;
            }
            #langSelect:hover {
            background-color: #ffffff;
        }

        
        .author {
            font-size: 0.8em;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            font-weight: 500;
            display: block;
            opacity: 0.8;
        }
        
        .author svg {
            transition: all 0.3s ease;
            fill: url(#gradient);
        }
        
        .author:hover {
            transform: translateY(-2px);
            opacity: 1;
            filter: drop-shadow(0 4px 10px rgba(102, 126, 234, 0.3));
        }
        
        .author:hover svg {
            fill: url(#gradientHover);
        }
        
        .social-links {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 35px;
            margin-bottom: 0px;
        }
        
        /* ç§»åŠ¨ç«¯å“åº”å¼è®¾è®¡ */
        @media screen and (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .container {
                padding: 30px 20px 20px 20px;
                transform: scale(1);
                margin: 10px;
                border-radius: 15px;
            }
            
            h1 {
                font-size: 2.2em;
                margin-bottom: 15px;
                margin-top: 5px;
            }
            
            .author {
                font-size: 0.7em;
            }
            
            .social-links {
                margin-top: 30px;
                margin-bottom: 0px;
                gap: 15px;
            }
            
            .field {
                margin: 15px 0;
                flex-direction: row;
                align-items: center;
                gap: 12px;
            }
            
            select {
                min-width: 130px;
                width: 40%;
                padding: 10px 35px 10px 12px;
                font-size: 13px;
                margin-bottom: 0;
            }
            
            input {
                width: 55%;
                padding: 10px 12px;
                font-size: 16px;
                text-align: right;
            }
        }
        
        @media screen and (max-width: 480px) {
            .container {
                padding: 20px 15px 20px 15px;
                margin: 5px;
            }
            
            h1 {
                font-size: 1.8em;
                margin-bottom: 12px;
            }
            
            .author {
                font-size: 0.6em;
            }
            
            .social-links {
                margin-top: 20px;
                margin-bottom: 0px;
                gap: 12px;
            }
            
            .field {
                margin: 10px 0;
                gap: 8px;
            }
            
            select {
                min-width: 110px;
                width: 50%;
                padding: 8px 30px 8px 10px;
                font-size: 12px;
            }
            
            input {
                width: 46%;
                padding: 8px 10px;
                font-size: 16px;
                text-align: right;
            }
        }
        
        /* è‡ªå®šä¹‰ä»£å¸å¼¹çª—æ ·å¼ */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background: linear-gradient(145deg, #ffffff, #f8faff);
            margin: 5% auto;
            padding: 0;
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.3);
            animation: modalSlideIn 0.3s ease-out;
        }
        
        @keyframes modalSlideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 25px 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 20px 20px 0 0;
        }
        
        .modal-header h3 {
            margin: 0;
            font-size: 18px;
            font-weight: 600;
        }
        
        .close {
            color: white;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: opacity 0.2s;
        }
        
        .close:hover {
            opacity: 0.7;
        }
        
        .modal-body {
            padding: 30px;
        }
        
        .search-container {
            margin-bottom: 25px;
        }
        
        .search-container input {
            width: 100%;
            padding: 15px 20px;
            font-size: 16px;
            border: 2px solid #e1e8ff;
            border-radius: 12px;
            background: linear-gradient(145deg, #ffffff, #f0f4ff);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            box-sizing: border-box;
        }
        
        .search-container input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .search-results {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .token-result {
            display: flex;
            align-items: center;
            padding: 15px;
            margin: 10px 0;
            background: linear-gradient(145deg, #ffffff, #f8faff);
            border: 2px solid #e1e8ff;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .token-result:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.15);
        }
        
        .token-logo {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 15px;
            object-fit: cover;
        }
        
        .token-content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .token-name-row {
            margin-bottom: 8px;
        }
        
        .token-name {
            font-weight: 600;
            color: #333;
        }
        
        .token-bottom-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .token-symbol {
            color: #667eea;
            font-weight: 500;
            text-transform: uppercase;
        }
        
        .token-price {
            color: #27ae60;
            font-weight: 600;
        }
        
        .loading {
            text-align: center;
            padding: 40px 20px;
            color: #667eea;
        }
        
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #e1e8ff;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .no-results {
            text-align: center;
            padding: 40px 20px;
            color: #7f8c8d;
            font-style: italic;
        }
        
        /* æ·»åŠ åˆ°ä¸»å±å¹•æŒ‰é’®æ ·å¼ */
        .add-to-home-btn {
            background: none;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            font-weight: 500;
            display: block;
            opacity: 0.8;
            font-size: 24px;
            padding: 0;
            line-height: 1;
        }
        
        .add-to-home-btn svg {
            transition: all 0.3s ease;
            fill: url(#gradient);
        }
        
        .add-to-home-btn:hover {
            transform: translateY(-2px);
            opacity: 1;
            filter: drop-shadow(0 4px 10px rgba(102, 126, 234, 0.3));
        }
        
        .add-to-home-btn:hover svg {
            fill: url(#gradientHover);
        }
    </style>
</head>
<body>
    <!-- ğŸŒ åœ†å½¢è¯­è¨€åˆ‡æ¢æŒ‰é’®ï¼ˆEN / ä¸­ è‡ªåŠ¨åˆ‡æ¢ï¼‰ -->
    <style>
    .lang-btn {
    position: fixed;
    top: 15px;
    right: 15px;
    z-index: 9999;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    border: none;
    background-color: #FFD60A;     
    color: #000;                  
    font-weight: 700;
    font-size: 18px;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.25);
    transition: all 0.25s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    }
    .lang-btn:hover {
    background-color: #FFEA70;     
    transform: scale(1.08);
    }
    </style>

    <button class="lang-btn" id="langBtn">EN</button>

    <script>
    document.addEventListener("DOMContentLoaded", () => {
    const btn = document.getElementById("langBtn");
    let currentLang = localStorage.getItem("lang") || "en";

    // åˆå§‹åŒ–æŒ‰é’®æ–‡å­—
    btn.textContent = currentLang === "en" ? "EN" : "ä¸­æ–‡";

    // ç‚¹å‡»æŒ‰é’®åˆ‡æ¢è¯­è¨€
    btn.addEventListener("click", async () => {
        const newLang = currentLang === "en" ? "zh" : "en";
        localStorage.setItem("lang", newLang);
        currentLang = newLang;
        btn.textContent = newLang === "en" ? "EN" : "ä¸­æ–‡";

        // è°ƒç”¨é¡µé¢è¯­è¨€åˆ‡æ¢å‡½æ•°ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
        if (typeof setLanguage === "function") setLanguage(newLang);
        if (typeof refreshDonation === "function") await refreshDonation();
    });
    });
    </script>



<script>
const translations = {
  zh: {
    pageTitle: "Giggle æ…ˆå–„é‡‘æ¢ç®—å™¨",
    title: "å®æ—¶ææ¬¾æ€»é¢",
    donateTo: "æèµ ç»™ GiggleAcademy ğŸ“",
    loading: "åŠ è½½ä¸­â€¦",
    fail: "è·å–å¤±è´¥",
    retry: "è¯·ç¨åé‡è¯•",
    unit: "USD",
    options: {
      XUEXIAO: "ğŸ« ä¸€æ‰€å¸Œæœ›å°å­¦",
      JIAOCAI: "ğŸ“š å­¦ç”Ÿæ•™æåŒ…",
      WUFAN: "ğŸœ ä¸€å¹´çš„å„¿ç«¥åˆé¥­",
      XUEFEI: "ğŸ† å››å¹´çš„å¤§å­¦å­¦è´¹",
      CAOCHANG: "â›³ï¸ æ ¡å›­æ“åœº",
      DONGYI: "ğŸ§£ å„¿ç«¥å†¬è¡£"
    },
    placeholder: "å¯è´­ä¹°æ•°é‡ï¼ˆæ•´æ•°ï¼‰"
  },
  en: {
    pageTitle: "GiggleFund Converter",
    title: "Real-time Donation Total",
    donateTo: "Donation to GiggleAcademy ğŸ“",
    loading: "Loadingâ€¦",
    fail: "Failed to fetch",
    retry: "Please try again later",
    unit: "USD",
    options: {
      XUEXIAO: "ğŸ« A Primary Schooll",
      JIAOCAI: "ğŸ“š Textbook Pack",
      WUFAN: "ğŸœ One-year School Lunch",
      XUEFEI: "ğŸ† Four-year University Tuition",
      CAOCHANG: "â›³ï¸ School Playground",
      DONGYI: "ğŸ§£ Winter Clothes for Kids"
    },
    placeholder: "Items (integer)"
  }
};

// é»˜è®¤è¯­è¨€ï¼šè‹±æ–‡
let currentLang = localStorage.getItem("lang") || "en";

function setLanguage(lang) {
  const t = translations[lang];
  if (!t) return;

  currentLang = lang;
  localStorage.setItem("lang", lang);

  // â‘  ä¿®æ”¹æµè§ˆå™¨æ ‡ç­¾æ ‡é¢˜
  document.title = t.pageTitle;

  // â‘¡ ä¿®æ”¹é¡µé¢æœ€é¡¶æ ‡é¢˜ï¼ˆä¾‹å¦‚ <h1 class="pageTitle">ï¼‰
  const topTitle = document.querySelector("h1.pageTitle");
  if (topTitle) topTitle.textContent = t.pageTitle;

  // â‘¢ ä¿®æ”¹â€œå®æ—¶ææ¬¾æ€»é¢â€æ ‡é¢˜
  const usdTitle = document.getElementById("usdValueTitle");
  if (usdTitle) usdTitle.textContent = t.title;

  // â‘£ ä¿®æ”¹â€œæèµ ç»™...â€éƒ¨åˆ†ï¼ˆç¡®ä¿æ­¤æ ‡ç­¾æœ‰ id="donateText"ï¼‰
  const donateText = document.getElementById("donateText");
  if (donateText) donateText.textContent = t.donateTo;

  // â‘¤ ä¸‹æ‹‰æ¡†æ–‡å­—
  document.querySelectorAll("select[id^='currency']").forEach(sel => {
    sel.querySelectorAll("option").forEach(opt => {
      const val = opt.value;
      if (t.options[val]) opt.textContent = t.options[val];
    });
  });

  // â‘¥ è¾“å…¥æ¡† placeholder
  document.querySelectorAll("input[id^='amount']").forEach(input => {
    input.placeholder = t.placeholder;
  });

  // â‘¦ é‡‘é¢å•ä½ï¼ˆç¾å…ƒ â†” USDï¼‰
  const usdText = document.getElementById("usdValue");
  if (usdText) {
    usdText.textContent = usdText.textContent.replace(/(USD|USD)/, t.unit);
  }
}

// === åˆå§‹åŒ–ä¸äº‹ä»¶ç»‘å®š ===
document.addEventListener("DOMContentLoaded", () => {
  const select = document.getElementById("langSelect");
  select.value = currentLang;
  setLanguage(currentLang);

  select.addEventListener("change", async () => {
    const lang = select.value;
    setLanguage(lang);
    // åˆ‡æ¢è¯­è¨€åè‡ªåŠ¨åˆ·æ–°ææ¬¾é‡‘é¢
    if (typeof refreshDonation === "function") {
      await refreshDonation();
      const usdText = document.getElementById("usdValue");
      if (usdText) {
        usdText.textContent = usdText.textContent.replace(/(USD|USD)/, translations[lang].unit);
      }
    }
  });
});
</script>





    <div class="container">
       <h1 class="pageTitle">Donation Corrector</h1>

        
<!-- === æ˜¾ç¤ºåŒºåŸŸ === -->
<div id="donationCard" style="font-family: Arial; text-align:center; margin:40px auto; max-width:520px; padding:28px 20px; border-radius:16px; background:linear-gradient(135deg,#f7d947, #f7c847); box-shadow:0 10px 24px rgba(0,0,0,.12)">
  <h1 id="usdValue" style="font-size:38px; margin:0 0 10px; color:#222;">åŠ è½½ä¸­â€¦</h1>
  <div style="font-size:18px; color:#333;">
    <span id="bnbAmount">â€”</span>
    <span> @ </span>
    <span id="bnbPrice">$ â€”</span>
  </div>
  <div class="small mt" id="donateText">æèµ ç»™ GiggleAcademy ğŸ“</div>
</div>

<script>
  // ===== ä»·æ ¼è¡¨ï¼ˆå•ä½ï¼šUSDT â‰ˆ USDï¼‰=====
  const prices = {
    XUEXIAO: 70400,
    JIAOCAI: 70,
    WUFAN: 422,
    XUEFEI: 2812,
    CAOCHANG: 21130,
    DONGYI: 43
  };

  // ===== å®æ—¶ææ¬¾å…¨å±€å˜é‡ =====
  let currentDonationUSD = 0;

  // ===== BNB ææ¬¾åœ°å€ =====
  const ADDRESS = "0xC7f501D25Ea088aeFCa8B4b3ebD936aAe12bF4A4";

  // === è·å–é“¾ä¸Šä½™é¢ï¼ˆBNBï¼‰ ===
  async function getBNBBalanceViaRPC(address) {
    const rpcList = [
      "https://bsc-dataseed.binance.org",
      "https://bsc-dataseed1.bnbchain.org",
      "https://bsc-dataseed4.bnbchain.org"
    ];
    let lastErr;
    for (const rpc of rpcList) {
      try {
        const r = await fetch(rpc, {
          method: "POST",
          headers: { "content-type": "application/json" },
          body: JSON.stringify({
            jsonrpc: "2.0",
            id: 1,
            method: "eth_getBalance",
            params: [address, "latest"]
          })
        });
        if (!r.ok) throw new Error("RPC HTTP " + r.status);
        const j = await r.json();
        if (!j.result) throw new Error("RPC æ— ç»“æœï¼š" + JSON.stringify(j));
        const wei = BigInt(j.result);
        return Number(wei) / 1e18;
      } catch (e) {
        lastErr = e;
      }
    }
    throw lastErr || new Error("æ‰€æœ‰ RPC éƒ½å¤±è´¥");
  }

  // === è·å– BNB å½“å‰ç¾å…ƒä»·æ ¼ ===
  async function getBNBPriceUSD() {
    const r = await fetch("https://api.binance.com/api/v3/ticker/price?symbol=BNBUSDT");
    if (!r.ok) throw new Error("Binance ä»·æ ¼æºé”™è¯¯ " + r.status);
    const j = await r.json();
    const p = parseFloat(j.price);
    if (!isFinite(p)) throw new Error("Binance è¿”å›æ— æ•ˆä»·æ ¼");
    return p;
  }

  // === åˆ·æ–°ææ¬¾é‡‘é¢å¹¶æ›´æ–°æ˜¾ç¤º ===
  async function refreshDonation() {
    const $usd = document.getElementById("usdValue");
    const $amt = document.getElementById("bnbAmount");
    const $px = document.getElementById("bnbPrice");
    try {
      $usd.textContent = "loadingâ€¦";
      $amt.textContent = "â€”";
      $px.textContent = "$ â€”";

      const [bnb, price] = await Promise.all([
        getBNBBalanceViaRPC(ADDRESS),
        getBNBPriceUSD()
      ]);

      const usd = bnb * price;
      currentDonationUSD = usd; // âœ… ä¿å­˜æœ€æ–°ææ¬¾é¢ï¼ˆç¾å…ƒï¼‰

      // æ›´æ–°é¡¶éƒ¨æ˜¾ç¤º
      $amt.textContent = `${bnb.toFixed(4)} BNB`;
      $px.textContent = `$ ${price.toFixed(2)}`;
      $usd.textContent = usd.toLocaleString(undefined, {
        minimumFractionDigits: 2,
        maximumFractionDigits: 2
      }) + " USD";

      updateAllRows(); // âœ… åŒæ­¥æ›´æ–°è´­ä¹°åŠ›ç»“æœ
    } catch (e) {
      console.error(e);
      $usd.textContent = "è·å–å¤±è´¥";
      $amt.textContent = "è¯·ç¨åé‡è¯•";
      $px.textContent = e.message || "ç½‘ç»œé”™è¯¯";
    }
  }

  // === è®¡ç®—å¹¶å†™å…¥æŸä¸€è¡Œ ===
  function updateRow(i) {
    const sel = document.getElementById(`currency${i}`);
    const out = document.getElementById(`amount${i}`);
    if (!sel || !out) return;

    const key = sel.value;
    const price = prices[key];
    if (price == null || !currentDonationUSD) {
      out.value = "";
      return;
    }

    const count = Math.floor(currentDonationUSD / price);
    out.value = Number.isFinite(count) ? count : "";
  }

  // === æ‰¹é‡æ›´æ–°æ‰€æœ‰è¡Œ ===
  function updateAllRows() {
    const selects = document.querySelectorAll('select[id^="currency"]');
    selects.forEach(sel => {
      const i = Number(sel.id.replace("currency", ""));
      updateRow(i);
    });
  }

  // === åˆæ¬¡åŠ è½½ç»‘å®šäº‹ä»¶ ===
  document.addEventListener("DOMContentLoaded", () => {
    const selects = document.querySelectorAll('select[id^="currency"]');
    selects.forEach(sel => {
      const i = Number(sel.id.replace("currency", ""));
      sel.addEventListener("change", () => updateRow(i));
    });

    refreshDonation();
    setInterval(refreshDonation, 30000); // æ¯30ç§’åˆ·æ–°
  });
</script>



    <div class="field">
        <select id="currency1">
                <option value="XUEXIAO">ğŸ« ä¸€æ‰€å¸Œæœ›å°å­¦</option>
                <option value="JIAOCAI">ğŸ“š å­¦ç”Ÿæ•™æåŒ…</option>
                <option value="CAOCHANG">â›³ï¸ å›½æ ‡æ ¡å›­æ“åœº</option>
                <option value="DONGYI">ğŸ§£ è´«å›°å„¿ç«¥çš„å†¬è¡£</option>
                <option value="WUFAN">ğŸœ ä¸€å¹´çš„å„¿ç«¥åˆé¥­å¼€é”€</option>
                <option value="XUEFEI">ğŸ† å¤§å­¦å››å¹´çš„å­¦è´¹</option>
            </optgroup>
        </select>
        <input type="text" id="amount1" placeholder="å¯ä»¥è´­ä¹°">
    </div>
    
    <div class="field">
        <select id="currency2">
                <option value="JIAOCAI">ğŸ“š å­¦ç”Ÿæ•™æåŒ…</option>
                <option value="XUEXIAO">ğŸ« ä¸€æ‰€å¸Œæœ›å°å­¦</option>
                <option value="CAOCHANG">â›³ï¸ å›½æ ‡æ ¡å›­æ“åœº</option>
                <option value="DONGYI">ğŸ§£ è´«å›°å„¿ç«¥çš„å†¬è¡£</option>
                <option value="WUFAN">ğŸœ ä¸€å¹´çš„å„¿ç«¥åˆé¥­å¼€é”€</option>
                <option value="XUEFEI">ğŸ† å¤§å­¦å››å¹´çš„å­¦è´¹</option>
            </optgroup>
        </select>
        <input type="text" id="amount2" placeholder="å¯ä»¥è´­ä¹°">
    </div>
    
    <div class="field">
        <select id="currency3">
                <option value="WUFAN">ğŸœ ä¸€å¹´çš„å„¿ç«¥åˆé¥­å¼€é”€</option>
                <option value="XUEXIAO">ğŸ« ä¸€æ‰€å¸Œæœ›å°å­¦</option>
                <option value="JIAOCAI">ğŸ“š å­¦ç”Ÿæ•™æåŒ…</option>
                <option value="DONGYI">ğŸ§£ è´«å›°å„¿ç«¥çš„å†¬è¡£</option>
                <option value="XUEFEI">ğŸ† å¤§å­¦å››å¹´çš„å­¦è´¹</option>
                <option value="CAOCHANG">â›³ï¸ å›½æ ‡æ ¡å›­æ“åœº</option>
            </optgroup>
        </select>
        <input type="text" id="amount3" placeholder="å¯ä»¥è´­ä¹°">
    </div>
    
    
    <div class="social-links" style="display: flex; justify-content: space-between; align-items: center;">
        
        <div id="apiStatus" class="api-status" style="font-size: 11px; color: #6c757d;">
            Your donation means everything for them...
        </div>


        <!-- æŒ‰é’®ç»„ -->
        <div style="display: flex; gap: 10px; align-items: center;">
            <svg width="0" height="0" style="position: absolute;">
                <defs>
                    <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" stop-color="#667eea"/>
                        <stop offset="100%" stop-color="#764ba2"/>
                    </linearGradient>
                    <linearGradient id="gradientHover" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" stop-color="#764ba2"/>
                        <stop offset="100%" stop-color="#667eea"/>
                    </linearGradient>
                </defs>
            </svg>
            
            <a href="https://x.com/crypto_crane888" target="_blank" class="author">
                <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                </svg>
            </a>
            <a href="https://github.com/cozychang/GiggleFund-Converter" target="_blank" class="author">
                <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.30.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                </svg>
            </a>
            </button>
        </div>
    </div>






</body>
</html>
